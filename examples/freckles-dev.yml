---
# freckles config to create a dev environment for freckles itself

tasks:
  - git-repo:
      repo: https://github.com/makkus/freckles.git
      target: ~/projects/freckles

  - update-package-cache
  - install: 
      packages:
        - dev-requirements:
            pkgs:
              apt:
                - build-essential
                - python-dev
                - python-virtualenv
                - libssl-dev
                - libffi-dev
                - stow
                - libsqlite3-dev

  - create-folder: ~/.freckles/data/venv

  - install:
      pkg_mgr: pip
      virtualenv: ~/.freckles/data/venv/freckles_test
      packages:
        - pip
        - setuptools
        - wheel
        - ~/projects/freckles/requirements_dev.txt

  - shell:
      free_form: 'source ~/.freckles/data/venv/freckles_test/bin/activate && python setup.py develop'
      chdir: '~/projects/freckles'
      executable: 'bash'
